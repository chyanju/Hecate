traversal fuse {
    case Group {
        recur l;
        recur r;
        ??;
    }
}
interface Element {
    output v : int;
    output p : int;
    input isLeaf : bool;
}
class Group : Element {
    children {
        l : Element;
        r : Element;
    }
    rules {
        self.v := 
            if self.isLeaf then
                1
            else
                l.v + r.v;

        self.p :=
            if self.isLeaf then
                -1
            else
                l.v * self.v;
    }
}