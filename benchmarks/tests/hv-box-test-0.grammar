// 
// run with: ./run.rkt --root VirtualRoot fuse benchmarks/tests/hv-box-test-0.grammar
//
// this works but takes slightly long

traversal fuse {
    case VRBox {
        ??;
        recur root;
    }
    case HBox {
        ??;
        recur l;
        recur r;
    }
    case VBox {
        ??;
        recur t;
        recur b;
    }
    case Leaf {
        ??;
    }
}

interface VirtualRoot {

}
class VRBox : VirtualRoot {
    children {
        root : HVBox;
    }
    rules {
    }
}

interface HVBox {
    output w : int;
    output h : int;
    input w0 : int; // for Leaf
    input h0 : int; // for Leaf
}
class HBox : HVBox {
    children {
        l : HVBox;
        r : HVBox;
    }
    rules {
        self.w := default();
        self.h := default();
    }
}
class VBox : HVBox {
    children {
        t : HVBox;
        b : HVBox;
    }
    rules {
        self.w := default();
        self.h := default();
    }
}
class Leaf : HVBox {
    children {

    }
    rules {
        self.w := default();
        self.h := default();
    }
}




















